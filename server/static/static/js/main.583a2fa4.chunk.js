(this["webpackJsonpmeschain-client"]=this["webpackJsonpmeschain-client"]||[]).push([[0],{160:function(e,t,c){},161:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),o=c(47),i=c.n(o),a=c(51),r=c(103),l=c(102),h=c(8),j=c(19),d=c(91),b=c(162),u=c(18),m=c(7),O=c(95),f=c(48),x=c(163),w=c(22),y=c(3);var p=function(){sessionStorage.whoami&&(window.location.hash="#/");var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],o=t[1],i=Object(n.useState)(1),a=Object(j.a)(i,2),r=a[0],l=a[1];return Object(y.jsx)("div",{className:"main__class",children:Object(y.jsxs)(d.a,{width:"auto",mx:"auto",my:"auto",maxWidth:"420px",bg:"#2c2c2c",color:"white",border:0,p:4,style:{boxShadow:"9px 9px 8px rgb(0 0 0)"},children:[0===r&&Object(y.jsxs)(s.a.Fragment,{children:[Object(y.jsx)(b.a,{children:"Log In to Meschain"}),Object(y.jsx)(u.a.p,{children:"If you have your keys with you go ahead and upload them"}),Object(y.jsx)(m.b,{mx:"auto",style:{display:"flex",justifyContent:"center"},children:Object(y.jsx)(O.a,{label:"Your key file",children:Object(y.jsx)(f.a,{type:"file",required:!0,accept:".meschain",placeholder:"Keys",onChange:function(e){var t=e.nativeEvent.srcElement.files[0],c=new FileReader;c.onload=function(e){sessionStorage.setItem("file",e.target.result),sessionStorage.setItem("kind",0),window.location.hash="#/setup"},c.readAsText(t)}})})}),Object(y.jsxs)(u.a.p,{style:{fontStyle:"italic"},children:["Don't have keys? Get new one"," ",Object(y.jsx)(x.a,{title:"Click here to signup",onClick:function(){return l(1)},children:"here."})]})]}),1===r&&Object(y.jsxs)(s.a.Fragment,{children:[Object(y.jsx)(b.a,{children:"SignUp for Meschain"}),Object(y.jsx)(u.a.p,{children:"No need for email or mobile. Just enter a name as you like."}),Object(y.jsxs)(m.b,{mx:"auto",children:[Object(y.jsx)(O.a,{label:"Your Name",style:{width:"100%"},children:Object(y.jsx)(f.a,{type:"text",style:{width:"100%"},value:c,onChange:function(e){return o(e.target.value)},placeholder:"eg. Superman"})}),Object(y.jsx)(w.a,{icon:"ArrowForward",iconpos:"right",onClick:function(){sessionStorage.setItem("user",c),sessionStorage.setItem("kind",1),window.location.hash="#/setup"},children:"Lets go"})]}),Object(y.jsxs)(u.a.p,{style:{fontStyle:"italic"},children:["Already have keys? Log In"," ",Object(y.jsx)(x.a,{title:"Click here to login",onClick:function(){return l(0)},children:"here."})]})]})]})})},g=c(164),k=c(165),S=c(166);var C=function(e){var t=function(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))},c=Object(n.useState)(!1),s=Object(j.a)(c,2),o=s[0],i=s[1],a=Object(n.useState)(""),r=Object(j.a)(a,2),l=r[0],h=r[1];return Object(n.useEffect)((function(){window.peer.identity.subscribe((function(e){try{localStorage.setItem(JSON.parse(e).from,e)}catch(t){}}))}),[]),Object(y.jsxs)("div",{children:[Object(y.jsxs)(m.b,{bg:"#2f3136",p:2,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsx)(g.a,{style:{borderRadius:"50%"},opts:{seed:sessionStorage.whoami,color:t(),bgcolor:t(),spotcolor:t()}}),Object(y.jsxs)(b.a.h6,{style:{margin:0},children:["Chats of ",window.user.userInfo.username||"Anonymous"]}),Object(y.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(y.jsx)(w.a.Text,{icon:"Info",icononly:!0,size:"small",title:"Stats for Nerds",mr:2,className:"logsBTN",onClick:function(){i(!o),o?(document.querySelector(".logs").style="",document.querySelector(".chats").style="",document.querySelector(".chats").children[0].style="",document.querySelector(".chats").children[1].style=""):(document.querySelector(".logs").style="display: none",document.querySelector(".chats").style="width: 100%",document.querySelector(".chats").children[0].style="width: 35%",document.querySelector(".chats").children[1].style="width: 65%")},style:{color:"#ffffff"}}),Object(y.jsx)(w.a,{icon:"PowerSettingsNew",size:"small",iconpos:"right",onClick:function(){return window.location.reload()},children:"Log Out"})]})]}),Object(y.jsxs)(m.b,{p:2,bg:"#36393f",children:[Object(y.jsx)(u.a,{fontSize:"1",children:"Your Meschain Address"}),Object(y.jsx)(k.a,{address:sessionStorage.whoami,className:"hideQR"})]}),Object(y.jsx)(m.b,{p:2,bg:"#2f3136",children:Object(y.jsxs)(S.a,{className:"fullWidth",children:[Object(y.jsx)(O.a,{label:"Your Friends Meschain Address",children:Object(y.jsx)(f.a,{type:"text",placeholder:"Ask your friend to share their address",style:{width:"100%"},required:!0,value:l,onChange:function(e){return h(e.target.value)}})}),Object(y.jsx)(w.a,{icon:"Add",icononly:!0,ml:2,onClick:function(e){e.preventDefault();try{localStorage.getItem(l)||window.peer.privateMSG(void 0,l,"WHO")}catch(t){alert("INvald ID")}h("")}})]})}),Object(y.jsxs)(m.b,{p:2,bg:"#46484b",style:{height:"100%",overflowY:"auto"},children:[Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"}),Object(y.jsx)("li",{children:"Chats from blockchain"})]})]})},v=c.p+"static/media/nochat.0f4e4e0d.png";var I=function(e){var t=Object(n.useState)(0),c=Object(j.a)(t,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){window.peer.numConnections.subscribe((function(e){return i(e)}))}),[o]),Object(y.jsx)("div",{className:"hideChat",children:Object(y.jsxs)(m.b,{p:2,style:{height:"100%"},color:"#ffffff",children:[!e.curr&&Object(y.jsx)(s.a.Fragment,{children:Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"inherit"},children:Object(y.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"0.5rem"},children:[Object(y.jsx)("img",{src:v,width:"200"}),Object(y.jsx)(b.a.h4,{my:1,children:"It's always nice to chat with to someone"}),Object(y.jsx)(u.a,{my:0,children:"Pick a chat from the left menu, or add your friends to start a new chat."}),Object(y.jsxs)(u.a,{my:1,children:["By the way you're currently directly connected to ",Object(y.jsx)("b",{children:o})," users."]}),Object(y.jsxs)("small",{style:{marginTop:"2rem",width:"60%"},children:["All your messages are always end-to-end encrypted to never go to any server. Everything happens on a blockchain powered by people like you. ",Object(y.jsx)("wbr",{})," Meschain is built on top of blockchain where all the users compete to add your new message to the blockchain. Note that once you've sent a message it is for forever no one (not even you) can alter or delete it."]})]})})}),e.curr&&Object(y.jsx)(s.a.Fragment,{children:e.curr})]})})};var N=function(){var e=Object(n.useState)(void 0),t=Object(j.a)(e,2),c=t[0],s=t[1];return Object(y.jsxs)("div",{className:"home",children:[Object(y.jsxs)("div",{className:"chats",children:[Object(y.jsx)(C,{set:s}),Object(y.jsx)(I,{curr:c})]}),Object(y.jsx)("div",{className:"logs"})]})};var q=function(){var e=sessionStorage.kind;return Object(n.useEffect)((function(){if(e||(window.location.hash="#/auth"),"1"===e&&(window.user=new window.User(null,null,sessionStorage.user),sessionStorage.setItem("whoami",window.user.keyHash),window.peer=new window.Peer(window.user.keyHash,window.user.whoami)),"0"===e){var t=sessionStorage.file;t||(window.location.hash="#/auth"),window.user=new window.User(JSON.parse(t).publicKey,JSON.parse(t).secretKey,JSON.parse(t).username),window.peer=new window.Peer(window.user.keyHash,window.user.whoami),window.user.keyHash!==JSON.parse(t).keyHash&&(window.location.hash="#/auth"),sessionStorage.setItem("whoami",window.user.keyHash),window.location.hash="#/"}}),[]),Object(y.jsx)("div",{className:"main__class",children:Object(y.jsxs)(d.a,{width:"auto",mx:"auto",my:"auto",maxWidth:"420px",bg:"#2c2c2c",color:"white",border:0,p:4,style:{boxShadow:"9px 9px 8px rgb(0 0 0)"},children:["1"===e&&Object(y.jsxs)(s.a.Fragment,{children:[Object(y.jsx)(b.a,{children:"Hang On"}),Object(y.jsx)(u.a.p,{children:"Download your keys and keep them at a safe private place."}),Object(y.jsxs)(m.b,{style:{display:"flex",justifyContent:"center"},children:[Object(y.jsx)(w.a.Text,{icon:"ArrowForward",iconpos:"right",style:{color:"#ffffff"},onClick:function(){return window.location.hash="#/"},children:"Continue"}),Object(y.jsx)(w.a,{mx:4,onClick:function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(new Blob([JSON.stringify(window.user.userInfo)],{type:"meschain"})),e.download="key.meschain",e.click(),window.URL.revokeObjectURL(e.href)},children:"Download"})]}),Object(y.jsx)(u.a.p,{style:{fontStyle:"italic"},children:"If you loose this key their is no way of accessing your messages again."})]}),"0"===e&&Object(y.jsxs)(s.a.Fragment,{children:[Object(y.jsx)(b.a,{children:"Hang On"}),Object(y.jsx)(u.a.p,{children:"Just a moment. We're preparing your chats."}),Object(y.jsx)(u.a.p,{style:{fontStyle:"italic"},children:"You'll be redirected automatically"})]})]})})};function A(e){var t=e.component,c=Object(r.a)(e,["component"]);return Object(y.jsx)(h.b,Object(a.a)(Object(a.a)({},c),{},{render:function(e){return!0===(!!sessionStorage.whoami&&(!!window.user||(sessionStorage.clear(),!1)))?Object(y.jsx)(t,Object(a.a)({},e)):Object(y.jsx)(h.a,{to:{pathname:"/auth",state:{from:e.location}}})}}))}var F=function(){return Object(y.jsx)(l.a,{children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{path:"/auth",component:p}),Object(y.jsx)(h.b,{path:"/setup",component:q}),Object(y.jsx)(A,{path:"/",component:N})]})})};c(160);i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(F,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.583a2fa4.chunk.js.map