(this["webpackJsonpmeschain-client"]=this["webpackJsonpmeschain-client"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n.n(s),c=n(47),a=n.n(c),r=n(51),i=n(103),l=n(102),d=n(8),h=n(37),j=n(91),u=n(162),b=n(18),w=n(7),y=n(95),x=n(48),O=n(163),f=n(21),m=n(4);var p=function(){sessionStorage.whoami&&(window.location.hash="#/");var e=Object(s.useState)(""),t=Object(h.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(1),r=Object(h.a)(a,2),i=r[0],l=r[1];return Object(m.jsx)("div",{className:"main__class",children:Object(m.jsxs)(j.a,{width:"auto",mx:"auto",my:"auto",maxWidth:"420px",bg:"#2c2c2c",color:"white",border:0,p:4,style:{boxShadow:"9px 9px 8px rgb(0 0 0)"},children:[0===i&&Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(u.a,{children:"Log In to Meschain"}),Object(m.jsx)(b.a.p,{children:"If you have your keys with you go ahead and upload them"}),Object(m.jsx)(w.b,{mx:"auto",style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(y.a,{label:"Your key file",children:Object(m.jsx)(x.a,{type:"file",required:!0,accept:".key",placeholder:"Keys",onChange:function(e){var t=e.nativeEvent.srcElement.files[0],n=new FileReader;n.onload=function(e){sessionStorage.setItem("file",e.target.result),sessionStorage.setItem("kind",0),window.location.hash="#/setup"},n.readAsText(t)}})})}),Object(m.jsxs)(b.a.p,{style:{fontStyle:"italic"},children:["Don't have keys? Get new one"," ",Object(m.jsx)(O.a,{title:"Click here to signup",onClick:function(){return l(1)},children:"here."})]})]}),1===i&&Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(u.a,{children:"SignUp for Meschain"}),Object(m.jsx)(b.a.p,{children:"No need for email or mobile. Just enter a name as you like."}),Object(m.jsxs)(w.b,{mx:"auto",children:[Object(m.jsx)(y.a,{label:"Your Name",style:{width:"100%"},children:Object(m.jsx)(x.a,{type:"text",style:{width:"100%"},value:n,onChange:function(e){return c(e.target.value)},placeholder:"eg. Superman"})}),Object(m.jsx)(f.a,{icon:"ArrowForward",iconpos:"right",onClick:function(){sessionStorage.setItem("user",n),sessionStorage.setItem("kind",1),window.location.hash="#/setup"},children:"Lets go"})]}),Object(m.jsxs)(b.a.p,{style:{fontStyle:"italic"},children:["Already have keys? Log In"," ",Object(m.jsx)(O.a,{title:"Click here to login",onClick:function(){return l(0)},children:"here."})]})]})]})})},g=n(164),S=n(165),v=n(166);var k=function(){var e=function(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))},t=Object(s.useState)(!1),n=Object(h.a)(t,2),o=n[0],c=n[1],a=Object(s.useState)(""),r=Object(h.a)(a,2),i=r[0],l=r[1];return Object(s.useEffect)((function(){window.peer.identity.subscribe((function(e){try{localStorage.setItem(JSON.parse(e).from,e)}catch(t){}}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)(w.b,{bg:"#2f3136",p:2,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(m.jsx)(g.a,{style:{borderRadius:"50%"},opts:{seed:sessionStorage.whoami,color:e(),bgcolor:e(),spotcolor:e()}}),Object(m.jsxs)(u.a.h6,{style:{margin:0},children:["Chats of ",window.user.userInfo.username||"Anonymous"]}),Object(m.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(m.jsx)(f.a.Text,{icon:"Info",icononly:!0,size:"small",title:"Stats for Nerds",mr:2,onClick:function(){c(!o),o?(document.querySelector(".logs").style="",document.querySelector(".chats").style="",document.querySelector(".chats").children[0].style="",document.querySelector(".chats").children[1].style=""):(document.querySelector(".logs").style="display: none",document.querySelector(".chats").style="width: 100%",document.querySelector(".chats").children[0].style="width: 35%",document.querySelector(".chats").children[1].style="width: 65%")},style:{color:"#ffffff"}}),Object(m.jsx)(f.a,{icon:"PowerSettingsNew",size:"small",iconpos:"right",onClick:function(){return window.location.reload()},children:"Log Out"})]})]}),Object(m.jsxs)(w.b,{p:2,bg:"#36393f",children:[Object(m.jsx)(b.a,{fontSize:"1",children:"Your Meschain Address"}),Object(m.jsx)(S.a,{address:sessionStorage.whoami,className:"hideQR"})]}),Object(m.jsx)(w.b,{p:2,bg:"#2f3136",children:Object(m.jsxs)(v.a,{className:"fullWidth",children:[Object(m.jsx)(y.a,{label:"Your Friends Meschain Address",children:Object(m.jsx)(x.a,{type:"text",placeholder:"Ask your friend to share their address",style:{width:"100%"},required:!0,value:i,onChange:function(e){return l(e.target.value)}})}),Object(m.jsx)(f.a,{icon:"Add",icononly:!0,ml:2,onClick:function(e){e.preventDefault();try{localStorage.getItem(i)||window.peer.privateMSG(void 0,i,"WHO")}catch(t){alert("INvald ID")}l("")}})]})})]})};var I=function(){return Object(m.jsx)("div",{children:Object(m.jsx)(w.b,{p:2,children:"HI"})})};var C=function(){return Object(m.jsxs)("div",{className:"home",children:[Object(m.jsxs)("div",{className:"chats",children:[Object(m.jsx)(k,{}),Object(m.jsx)(I,{})]}),Object(m.jsx)("div",{className:"logs"})]})};var N=function(){var e=sessionStorage.kind;return Object(s.useEffect)((function(){if(e||(window.location.hash="#/auth"),"1"===e&&(window.user=new window.User(null,null,sessionStorage.user),sessionStorage.setItem("whoami",window.user.keyHash),window.peer=new window.Peer(window.user.keyHash,window.user.whoami)),"0"===e){var t=sessionStorage.file;t||(window.location.hash="#/auth");for(var n=[],s=0;s<32;s++)n.push(JSON.parse(t).publicKey[s]);var o=new Uint8Array(n);n=[];for(var c=0;c<32;c++)n.push(JSON.parse(t).secretKey[c]);var a=new Uint8Array(n);window.user=new window.User(o,a,JSON.parse(t).username),window.peer=new window.Peer(window.user.keyHash,window.user.whoami),window.user.keyHash!==JSON.parse(t).keyHash&&(window.location.hash="#/auth"),sessionStorage.setItem("whoami",window.user.keyHash),window.location.hash="#/"}}),[]),Object(m.jsx)("div",{className:"main__class",children:Object(m.jsxs)(j.a,{width:"auto",mx:"auto",my:"auto",maxWidth:"420px",bg:"#2c2c2c",color:"white",border:0,p:4,style:{boxShadow:"9px 9px 8px rgb(0 0 0)"},children:["1"===e&&Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(u.a,{children:"Hang On"}),Object(m.jsx)(b.a.p,{children:"Download your keys and keep them at a safe private place."}),Object(m.jsxs)(w.b,{style:{display:"flex",justifyContent:"center"},children:[Object(m.jsx)(f.a.Text,{icon:"ArrowForward",iconpos:"right",style:{color:"#ffffff"},onClick:function(){return window.location.hash="#/"},children:"Continue"}),Object(m.jsx)(f.a,{mx:4,onClick:function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(new Blob([JSON.stringify(window.user.userInfo)],{type:"key"})),e.download="meschain.key",e.click(),window.URL.revokeObjectURL(e.href)},children:"Download"})]}),Object(m.jsx)(b.a.p,{style:{fontStyle:"italic"},children:"If you loose this key their is no way of accessing your messages again."})]}),"0"===e&&Object(m.jsxs)(o.a.Fragment,{children:[Object(m.jsx)(u.a,{children:"Hang On"}),Object(m.jsx)(b.a.p,{children:"Just a moment. We're preparing your chats."}),Object(m.jsx)(b.a.p,{style:{fontStyle:"italic"},children:"You'll be redirected automatically"})]})]})})};function A(e){var t=e.component,n=Object(i.a)(e,["component"]);return Object(m.jsx)(d.b,Object(r.a)(Object(r.a)({},n),{},{render:function(e){return!0===(!!sessionStorage.whoami&&(!!window.user||(sessionStorage.clear(),!1)))?Object(m.jsx)(t,Object(r.a)({},e)):Object(m.jsx)(d.a,{to:{pathname:"/auth",state:{from:e.location}}})}}))}var q=function(){return Object(m.jsx)(l.a,{children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/auth",component:p}),Object(m.jsx)(d.b,{path:"/setup",component:N}),Object(m.jsx)(A,{path:"/",component:C})]})})};n(160);a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.e4485471.chunk.js.map